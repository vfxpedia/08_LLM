# 02_Score_System_Detail.md
## 1. 개요

본 문서는 ‘예리는 못 말려’의 **점수 시스템(Score System)**과 **Gameplay Mechanics**를 통합 설계한 개발 명세서이다. 
게임은 3턴(3초, 10초, 30초) 구조로 진행되며, 플레이어의 반응·속도·정답률·감정 표현·콤보 상태가 모두 EEVE LLM 감정 분석을 통해 점수화된다.

---

## 2. 점수 구성 요소

| 항목 | 설명 | 비율 |
|------|------|------|
| 감정 센스 (Emotional Sense) | EEVE 감정 분석 결과를 기반으로 한 공감/연애 센스 점수 | 60% |
| 관찰력 (Observation) | 시각적으로 다른 부분을 인식한 정확도 | 25% |
| 순발력 (Reflex) | 제한 시간 내 반응 속도 (남은 시간 비례) | 15% |

> 모든 점수는 100점 만점 기준으로 환산되며, 실질적으로 100점을 달성하는 것은 거의 불가능하도록 설계되어 있다.

---

## 3. 턴 구조 및 점수 반영

| 턴 | 시간 | 주요 역할 | 점수 반영 방식 |
|-----|------|-------------|----------------|
| **1턴** | 3초 | 몰입 유도, 긴장감 조성 | 정답 점수 미반영 (튜토리얼 성격) |
| **2턴** | 10초 | 실제 채점 시작, 정답 수 기반 | 감정센스+관찰력+순발력 부분 점수 반영 |
| **3턴** | 30초 | 전체 평가, 감정 피드백 및 콤보 반영 | 최종 점수 합산 및 Emotion Multiplier 적용 |

> 플레이어가 모든 정답을 맞추더라도 2턴으로 넘어가며, 전체 게임은 항상 3턴까지 진행된다.

---

## 4. 점수 계산 공식

```text
TurnScore = (감정센스 × 0.6) + (관찰력 × 0.25) + (순발력 × 0.15)
FinalScore = (Σ TurnScore × EmotionMultiplier) + ComboBonus
```

- **EmotionMultiplier (감정 계수):** EEVE 감정 분석 결과에 따른 공감도 가중치 (0.8 ~ 1.2)
- **ComboBonus (콤보 보너스):** 턴 종료 후 연속 정답 수에 따라 추가 (최대 +6점)
- **FinalScore:** 100점 만점 환산 후 엔딩 분기 결정

---

## 5. 콤보 시스템 (Combo Bonus)

플레이어가 연속으로 정답을 맞출 경우 **콤보 점수**가 부여된다. 콤보는 각 턴 종료 후 최종 점수에 가산된다.

| 콤보 수 | 추가 점수 | 예리의 반응 |
|----------|-------------|--------------|
| 1콤보 | +2점 | “오~ 오빠 감각 있는데?” |
| 2콤보 | +4점 | “헐, 두 개 연속이야? 나 설레는데...?” |
| 3콤보 | +6점 | “오빠... 진짜 나 좋아하지?♡” |

- 콤보는 턴 내에서 연속 정답 시 자동 계산.
- 콤보 종료 후 EEVE 감정 피드백이 추가 분석되어 EmotionMultiplier에 반영됨.

---

## 6. 감정 분석 및 계수 구조 (EEVE + VectorDB)

- **EEVE LLM**은 플레이어 답변의 감정적 공감도, 톤, 어휘 감정 레벨을 분석.
- **VectorDB**는 감정 키워드 데이터셋(예: “사랑해”, “귀여워”, “예쁘다”, “감동”)을 참조하여 의미 유사도를 계산.
- 결과값은 0~1 스케일로 정규화된 뒤 0.8~1.2 범위의 **EmotionMultiplier**로 변환.

> 예를 들어, “오늘은 천사가 내려온 줄 알았어”는 공감 키워드 점수가 높아 감정 계수가 1.15로 설정됨.

---

## 7. 점수 시뮬레이션 예시

| 구분 | 감정센스 | 관찰력 | 순발력 | EmotionMultiplier | ComboBonus | 최종점수 |
|------|------------|----------|----------|--------------------|--------------|--------------|
| 평균 플레이어 | 65 | 60 | 70 | 1.0 | +2 | **73점 (귀엽게 삐진 엔딩)** |
| 고득점자 | 80 | 75 | 85 | 1.15 | +4 | **91점 (사랑꾼 엔딩)** |
| 초보 플레이어 | 45 | 40 | 50 | 0.9 | 0 | **47점 (이별 엔딩)** |

> 위 시뮬레이션은 실제 EEVE 감정 계수 모델 및 VectorDB 연동 시 테스트 케이스로 사용 가능하다.

---

## 8. 밸런싱 원칙

1. **평균 점수대:** 55~75점 구간을 주요 타겟으로 설계.
2. **100점 달성 난이도:** 극히 낮음 (감정센스·속도·콤보 완벽 조합 필요).
3. **감정 계수 영향:** 감정적으로 풍부한 대화일수록 점수가 높게 산출.
4. **턴별 편차 최소화:** 턴 간 점수 격차가 크지 않도록 정규화.

---

## 9. 연계 문서

- **01_Game_Structure.md:** 3턴 진행 구조·콤보 시스템·시간 배분 연계.
- **03_Character_Design.md:** 예리 표정·대사·음성 변화 설계.
- **04_LLM_Prompt_Design.md:** 감정·공감·센스 평가용 프롬프트 구조.
- **05_Technical_Implementation.md:** 점수 계산 및 상태 관리 로직 구현 명세.

---

이 문서는 **최신 게임 밸런싱(콤보 + 감정 계수 기반 100점 구조)** 및 **LLM 감정 분석 통합 로직**을 반영한 버전(v3)이다.

