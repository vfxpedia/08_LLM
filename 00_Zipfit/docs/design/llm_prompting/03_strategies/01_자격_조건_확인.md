# 자격 조건 확인 전략

## 개요

자격 조건 확인은 ZIPFIT의 핵심 기능입니다. 사용자 프로필과 공고문의 자격 요건을 정확히 비교하여, 신청 가능 여부와 유리한 옵션을 제시합니다.

---

## 1. 사용자 프로필 정보

### 1.1 로그인 시 수집 정보

**필수 입력 항목**
- 연령 (만 나이)
- 소득 (월 평균 소득)
- 혼인 상태 (미혼 / 기혼 / 예비 신혼부부)
- 자녀 유무 및 수
- 희망 지역 (구 단위)

**예시**
```json
{
  "age": 28,
  "income": 2500000,
  "marital_status": "unmarried",
  "children_count": 0,
  "preferred_region": "마포구"
}
```

### 1.2 프로필 활용

**대화 시작 시**
```
지피: 회원님의 프로필을 확인했습니다.
- 연령: 28세 (청년 자격 해당)
- 소득: 월 250만원
- 혼인 상태: 미혼
- 희망 지역: 서울 마포구

현재 마포구에서 모집 중인 공고가 2건 있습니다.
자격 조건을 확인해드릴까요?
```

---

## 2. 공고별 자격 요건

### 2.1 일반적인 자격 요건

**행복주택 기준 (LH)**

1. **연령**
   - 청년: 만 19~39세
   - 신혼부부: 혼인 7년 이내 또는 예비 신혼부부
   - 고령자: 만 65세 이상

2. **소득**
   - 도시근로자 월평균소득 100% 이하 (일반)
   - 도시근로자 월평균소득 120% 이하 (청년)
   - 1인 가구 기준: 약 360만원

3. **무주택**
   - 세대주 포함 세대원 전원 무주택
   - 과거 5년 이내 주택 소유 이력 없음

4. **기타**
   - 자동차 보유 기준 (2000cc 이하, 3000만원 이하)
   - 부동산 보유 기준

### 2.2 공고문 내 자격 조건 추출

**정확한 페이지 참조**
```
자격 조건:
- 연령: 만 19~39세
- 소득: 도시근로자 월평균소득 120% 이하 (1인 가구 약 360만원)
- 무주택 요건

(출처: LH_마포공덕_행복주택.pdf p.3)
```

---

## 3. 자격 조건 매칭 프로세스

### 3.1 기본 프로세스

```
[1단계] 사용자 프로필 확인
→ 연령, 소득, 혼인 상태, 자녀 수

[2단계] 공고문 자격 요건 추출
→ RAG 검색으로 자격 조건 섹션 찾기

[3단계] 조건별 비교
→ 연령 충족 여부
→ 소득 충족 여부
→ 무주택 충족 여부 (프로필에 있으면)
→ 기타 조건 확인

[4단계] 결과 도출
→ 충족 / 미달 / 확인 필요

[5단계] 복수 자격 확인
→ 여러 유형(청년, 신혼부부 등)에 해당하는지 확인
→ 가장 유리한 자격 제시
```

### 3.2 조건별 확인 방법

**연령 확인**
```python
# 의사 코드
user_age = 28
announcement_age_min = 19
announcement_age_max = 39

if announcement_age_min <= user_age <= announcement_age_max:
    result = "충족"
else:
    result = "미달"
```

**소득 확인**
```python
# 의사 코드
user_income = 2500000
income_limit = 3600000  # 도시근로자 월평균소득 120%

if user_income <= income_limit:
    result = "충족"
else:
    result = "미달"
```

**혼인 상태 확인**
```python
# 의사 코드
user_marital_status = "예비 신혼부부"
announcement_target = ["청년", "신혼부부", "예비 신혼부부"]

if user_marital_status in announcement_target:
    result = "충족"
```

---

## 4. 응답 형식

### 4.1 단일 자격 - 충족

```
사용자: 이 공고에 신청할 수 있어?

지피: 네, 신청 가능하십니다.

자격 조건 분석:
- 연령: 만 19~39세 (귀하: 28세) ✓
- 무주택 요건 ✓
- 소득: 도시근로자 월평균소득 120% 이하 (귀하: 250만원) ✓

(출처: LH_마포공덕_행복주택.pdf p.3)

신청 절차를 안내해드릴까요?
```

### 4.2 단일 자격 - 미달

```
사용자: 이 공고에 신청할 수 있어?

지피: 죄송하지만, 자격 요건을 충족하지 못합니다.

미달 사항:
- 연령: 만 19~39세 (귀하: 42세) ✗

충족 사항:
- 무주택 요건 ✓
- 소득 기준 ✓

(출처: LH_마포공덕_행복주택.pdf p.3)

다른 공고(고령자 우선 공급)를 추천해드릴까요?
```

### 4.3 복수 자격 - 유리한 옵션 제시

**핵심 포인트**
- 동일 공고에 여러 유형(청년, 신혼부부, 예비 신혼부부 등)으로 신청 가능
- 각 유형별 가점 비교
- 가장 유리한 옵션 적극 제시

**예시**
```
사용자: 이 공고에 신청할 수 있어?

지피: 네, 신청 가능하십니다.

참고로, 귀하는 이 공고에 두 가지 자격으로 신청 가능하십니다:

[자격 1] 청년
- 기본 가점: 20점
- 지역 우선: 10점
- 합계: 30점

[자격 2] 예비 신혼부부
- 기본 가점: 15점
- 합계: 15점

"청년" 자격으로 신청하시는 것이 15점 더 유리합니다.
(출처: LH_마포공덕_행복주택.pdf p.12)

신청 절차를 안내해드릴까요?
```

### 4.4 일부 조건 확인 필요

```
사용자: 이 공고에 신청할 수 있어?

지피: 현재 확인 가능한 조건은 모두 충족하십니다.

확인된 조건:
- 연령: 만 19~39세 (귀하: 28세) ✓
- 소득: 도시근로자 월평균소득 120% 이하 (귀하: 250만원) ✓

추가 확인 필요:
- 무주택 요건 (세대원 전원 무주택 여부)
- 자동차 보유 기준 (2000cc 이하, 3000만원 이하)

(출처: LH_마포공덕_행복주택.pdf p.3)

무주택 요건을 충족하시면 신청 가능합니다.
신청 절차를 안내해드릴까요?
```

---

## 5. 복수 자격 시나리오

### 5.1 청년 + 신혼부부

**상황**
- 나이: 만 28세
- 혼인 상태: 기혼 (혼인 1년)

**분석**
```
지피: 귀하는 "청년"과 "신혼부부" 두 자격 모두 해당합니다.

[청년 자격]
- 연령: 만 19~39세 ✓
- 가점: 기본 20점 + 지역 10점 = 30점

[신혼부부 자격]
- 혼인 기간: 7년 이내 ✓
- 가점: 기본 25점 + 자녀 0명 0점 = 25점

"청년" 자격이 5점 더 유리합니다.
(출처: LH_마포공덕_행복주택.pdf p.12)
```

### 5.2 청년 + 예비 신혼부부

**상황**
- 나이: 만 30세
- 혼인 상태: 예비 신혼부부 (혼인 예정)

**분석**
```
지피: 귀하는 "청년"과 "예비 신혼부부" 두 자격 모두 해당합니다.

[청년 자격]
- 연령: 만 19~39세 ✓
- 가점: 30점

[예비 신혼부부 자격]
- 혼인 예정 (혼인신고서 제출 예정) ✓
- 가점: 15점

"청년" 자격이 15점 더 유리합니다.
(출처: LH_마포공덕_행복주택.pdf p.12)

청년 자격으로 신청을 권장합니다.
```

### 5.3 신혼부부 + 자녀 우선

**상황**
- 혼인 상태: 기혼 (혼인 3년)
- 자녀: 1명

**분석**
```
지피: 귀하는 "일반 신혼부부"와 "자녀 우선 공급" 두 자격 모두 해당합니다.

[일반 신혼부부]
- 가점: 기본 25점 + 자녀 1명 15점 = 40점

[자녀 우선 공급]
- 가점: 기본 30점 + 자녀 1명 20점 = 50점

"자녀 우선 공급" 자격이 10점 더 유리합니다.
(출처: LH_마포공덕_행복주택.pdf p.12)
```

---

## 6. 가점 계산

### 6.1 가점 항목 (일반적 기준)

**청년**
- 기본: 20점
- 지역 우선: 10점
- 기간 거주: 5점
- 합계: 최대 35점

**신혼부부**
- 기본: 25점
- 자녀 1명: 15점
- 자녀 2명: 25점
- 자녀 3명 이상: 35점

**고령자**
- 기본: 30점
- 연령 가산 (70세 이상): 5점

### 6.2 가점 비교 출력

```
가점 비교:

청년: 35점
- 기본 20점
- 지역 우선 10점
- 거주 기간 5점

신혼부부: 25점
- 기본 25점
- 자녀 0명 0점

→ 청년 자격이 10점 더 유리합니다.

(출처: LH_마포공덕_행복주택.pdf p.12)
```

---

## 7. 에러 처리

### 7.1 프로필 정보 부족

```
사용자: 이 공고에 신청할 수 있어?

지피: 자격 확인을 위해 추가 정보가 필요합니다.

현재 확인 가능:
- 연령: ✓
- 소득: ✓

확인 필요:
- 무주택 여부
- 자동차 보유 여부

프로필 설정에서 추가 정보를 입력해주시면 정확한 확인이 가능합니다.
```

### 7.2 공고문에 자격 조건 없음

```
지피: 죄송하지만, 해당 공고문에서 자격 조건 정보를 확인할 수 없습니다.

LH 상담센터(1600-1004)로 문의하시면 정확한 자격 조건을 확인하실 수 있습니다.

다른 공고를 추천해드릴까요?
```

### 7.3 소득 기준 모호

```
지피: 현재 귀하의 소득(250만원)은 기준 소득(360만원) 이하로 충족하십니다.

단, 소득 산정 방법은 공고문에 따라 다를 수 있습니다:
- 본인 소득만 / 가구 소득 합산
- 세전 / 세후

정확한 확인은 LH 상담센터(1600-1004)로 문의하시길 권장합니다.

(출처: LH_마포공덕_행복주택.pdf p.3)
```

---

## 8. 자격 확인 체크리스트

모든 자격 확인 시:

**정확성 확인**
- [ ] 공고문에서 자격 조건을 정확히 추출했는가?
- [ ] 사용자 프로필 정보를 정확히 비교했는가?
- [ ] 수치 정보(연령, 소득)가 정확한가?

**복수 자격 확인**
- [ ] 여러 유형에 해당하는지 확인했는가?
- [ ] 각 유형별 가점을 비교했는가?
- [ ] 가장 유리한 옵션을 제시했는가?

**출처 명시**
- [ ] 자격 조건 출처를 명시했는가?
- [ ] 가점 계산 출처를 명시했는가?

**다음 단계 안내**
- [ ] 신청 가능 시 절차를 안내했는가?
- [ ] 미달 시 대안을 제시했는가?
- [ ] 추가 확인 필요 시 안내했는가?

---

## 9. 예시 시나리오

### 시나리오 1: 청년 단일 자격

**사용자 프로필**
```json
{
  "age": 28,
  "income": 2500000,
  "marital_status": "unmarried",
  "children_count": 0
}
```

**공고 자격 요건**
- 청년: 만 19~39세, 소득 360만원 이하

**응답**
```
지피: 네, 신청 가능하십니다.

자격 조건:
- 연령: 만 19~39세 (귀하: 28세) ✓
- 소득: 360만원 이하 (귀하: 250만원) ✓

(출처: LH_마포공덕_행복주택.pdf p.3)
```

### 시나리오 2: 청년 + 예비 신혼부부

**사용자 프로필**
```json
{
  "age": 30,
  "income": 3000000,
  "marital_status": "pre-newlywed",
  "children_count": 0
}
```

**공고 자격 요건**
- 청년: 만 19~39세
- 예비 신혼부부: 혼인 예정자

**응답**
```
지피: 네, 신청 가능하십니다.

귀하는 두 자격 모두 해당합니다:

[청년]
- 가점: 30점

[예비 신혼부부]
- 가점: 15점

"청년" 자격이 15점 더 유리합니다.
(출처: LH_마포공덕_행복주택.pdf p.12)

청년 자격으로 신청을 권장합니다.
```

### 시나리오 3: 연령 미달

**사용자 프로필**
```json
{
  "age": 42,
  "income": 2500000,
  "marital_status": "unmarried",
  "children_count": 0
}
```

**공고 자격 요건**
- 청년: 만 19~39세

**응답**
```
지피: 죄송하지만, 이 공고의 청년 자격 요건을 충족하지 못합니다.

미달 사항:
- 연령: 만 19~39세 (귀하: 42세) ✗

다른 공고 유형:
- 일반 공급 (연령 제한 없음)
- 고령자 우선 공급 (만 65세 이상)

일반 공급 공고를 추천해드릴까요?
```

### 시나리오 4: 소득 초과

**사용자 프로필**
```json
{
  "age": 28,
  "income": 4000000,
  "marital_status": "unmarried",
  "children_count": 0
}
```

**공고 자격 요건**
- 청년: 소득 360만원 이하

**응답**
```
지피: 죄송하지만, 소득 기준을 초과합니다.

미달 사항:
- 소득: 360만원 이하 (귀하: 400만원) ✗

충족 사항:
- 연령: 만 19~39세 (귀하: 28세) ✓

(출처: LH_마포공덕_행복주택.pdf p.3)

소득 기준이 더 높은 공고를 찾아드릴까요?
```

---

## 관련 문서

- [../01_core_principles.md](../01_core_principles.md)
- [../02_system_prompt/01_페르소나_설계.md](../02_system_prompt/01_페르소나_설계.md)
- [../02_system_prompt/03_출력_형식.md](../02_system_prompt/03_출력_형식.md)
- [02_공고_비교.md](./02_공고_비교.md)

---

**작성일**: 2025년 11월 21일

**작성자**: 오흥재

**버전**: v1.0.0
